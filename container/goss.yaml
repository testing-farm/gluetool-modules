---
package:
  ansible-core:
    installed: true
    versions:
      - 2.14.11

  beakerlib:
    installed: true

  beakerlib-libraries:
    installed: true

  python2.7:
    installed: false

  # TFT-1734
  # The rpm-build command is required for standard-test-source role
  # https://pagure.io/standard-test-roles/blob/master/f/roles/standard-test-source
  rpm-build:
    installed: true

  standard-test-roles:
    installed: true

  tmt:
    installed: true

  tmt+provision-container:
    installed: true

  tmt+provision-virtual:
    installed: true

  tmt+report-polarion:
    installed: true

file:
  /opt/gluetool/bin/citool:
    exists: true
    mode: "0755"
    filetype: file

  /opt/gluetool:
    exists: true
    mode: "0755"
    owner: root
    group: root
    filetype: directory

  /etc/os-release:
    exists: true
    filetype: symlink
    contains:
      - PRETTY_NAME="Fedora Linux 38 (Container Image)"

  /etc/ssh/ssh_config:
    exists: true
    mode: "0644"
    owner: root
    group: root
    filetype: file
    contains:
      - Host *
      - StrictHostKeyChecking no
      - UserKnownHostsFile /dev/null
      - SendEnv -LC_* -LANG_*
      - ServerAliveInterval 60
      - ServerAliveCountMax 5

command:
  ansible-galaxy collection list:
    exit-status: 0
    stdout:
      - ansible.posix
      - community.general
    timeout: 100000

  citool -l:
    exit-status: 0
    timeout: 100000

  citool ansible --help:
    exit-status: 0
    timeout: 100000

  env:
    exit-status: 0
    timeout: 100000
    stdout:
      - GLUETOOL_TRACING_DISABLE=1
      - /PATH=.*/opt/gluetool/bin/

  koji version:
    exit-status: 0
    timeout: 100000

  python3.9 --version:
    exit-status: 0
    stdout:
      - Python 3.9

  tmt --version:
    exit-status: 0
    stdout:
      - "tmt version: 1.30.0"
    timeout: 100000

  tmt run report -h polarion:
    exit-status: 2
    stderr:
      - "how: polarion"
      - "Failed to login with pylero"

  tmt run report -h reportportal:
    exit-status: 2
    stderr:
      - "how: reportportal"
      - "No ReportPortal server url provided."
